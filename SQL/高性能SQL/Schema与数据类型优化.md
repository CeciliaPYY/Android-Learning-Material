# Schema与数据类型优化

目录

4.1 选择优化的数据类型

4.2 MySQL schema 设计中的陷阱

4.3 范式和烦范式

4.4 缓存表和汇总表

4.5 加快 Alter Tabel 操作的速度

4.6 总结



## 4.1 选择优化的数据类型

#### 1. 遵循的原则

在选择优化数据类型时，可以遵循以下几个原则：

- 更小的通常更好（更小的数据类型通常更快，因为它们占用更少的磁盘、内存和CPU缓存，并且处理时需要的CPU周期也更少）；
- 简单就好（简单数据类型的操作通常需要更少的CPU周期）；
- 尽量避免NULL（可为NULL的列使得索引、索引统计和值比较都更为复杂，会使用更多的存储空间，当可为NULL的列被索引时，每个索引记录需要一个额外的字节）；



#### 2. 遵循的步骤

1. 确定合适的大类型：数字、字符串、时间等；
2. 选择具体的类型（很多MySQL的数据类型可以存储相同类型的数据，只是存储的长度和范围不一样，允许的精度不同，或者需要的物理空间不同）；

举个例子，比如DATETIME和TIMESTAMP列都可以存储相同类型的数据：时间和日期，精确到秒。但是后者只使用前者一半的存储空间，并且会根据时区变化。但是，前者允许的时间范围要小得多。



### 4.1.1 整数类型

这里比较需要注意的一点是，MySQL可以为整数类型指定宽度，比如INT(11)，对大多数应用这是没有意义的：它不会限制值的合法范围，只是规定了MySQL的一些交互工具用来显示字符的个数。对于存储和计算来说，INT(1)和INT(20)是相同的。



### 4.1.2 实数类型

1. DECIMAL除了可以用来存储小数，也可以用来存储比BIGINT还大的整数；
2. 



